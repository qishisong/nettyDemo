volatile可以实现可见性和禁止指令重排，但是不能保证原子性
原理：加入lock前缀
lock前缀指令实际上相当于一个内存屏障（也叫内存栅栏），内存屏障提供3个功能：
    1.它确保指令重排序是不会把其后面的指令排到内存屏障之前的位置，也不会把前面的指令排到内存屏障的后面；即在执行到内存屏障
    这句指令时，在它前面的操作已经全部完成
    2.它会强制将对缓存的修改操作立即写入主存
    3.如果是写操作，它会导致其他CPU中对用的缓存行无效